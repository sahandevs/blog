<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link href="https://fonts.googleapis.com/css?family=Source Code Pro" rel="stylesheet"/><meta name="generator" content="Gatsby 4.25.9"/><meta data-react-helmet="true" charSet="utf-8"/><meta data-react-helmet="true" property="og:title" content="Ø¬Ø§Ø¯ÙˆÛŒ Context"/><meta data-react-helmet="true" property="og:site_name" content="Sahand&#x27;s blog"/><style data-href="/styles.1906a6c925635f62b029.css" data-identity="gatsby-global-css">:root{--lr-padding:10px;--border-radius:8px;--primary-color-active:#ff7e14;--primary-color-inactive:#ffd1ac;--secondary-color:#fffcf9;--anim-duration:300ms;--paragraph-width:calc(min(760px, 100%));--code-width:min(100%,calc(var(--paragraph-width) + 12%));--paragraph-padding:calc((var(--code-width) - var(--paragraph-width))/2);font-size:16px}.footnotes,.main-container h1,.text,a,em,h2,h3,h4,h5,h6,li,p,ul{direction:rtl;font-family:Vazir,monospace,Source Code Pro!important;line-height:1.6}.main-container h1,h2,h3,h4,h5,h6{padding-left:var(--paragraph-padding);padding-right:var(--paragraph-padding)}.text a{overflow-wrap:anywhere}.footnotes li{color:#5c6e74;font-size:.8rem!important}.main-container-wrapper{align-items:center;display:flex;flex-direction:column;width:100%}.main-container p{margin:0}a{text-decoration:none}a,a:hover{color:var(--primary-color-active)}a:hover{text-decoration:underline}.main-container{padding-top:1rem;width:var(--code-width)}.main-container img{display:block;margin-left:auto;margin-right:auto;max-height:500px;max-width:80%}.main-container .img-container{max-width:100%}@media screen and (max-width:768px){:root{--lr-padding:10%}}@media screen and (max-width:375px){:root{--lr-padding:5%}.main-container{margin-top:0;padding-top:0!important}.main-container h1{margin-top:10px}.main-container blockquote{margin:25px 0 0}.main-container img{max-width:100%;vertical-align:top}.main-container .img-container{overflow-x:auto}}.main-container li{font-size:1.2rem;margin-left:var(--paragraph-padding);margin-right:var(--paragraph-padding);margin-top:.6rem;padding:0;text-align:justify}.main-container p,.text{font-size:1.2rem;padding-left:var(--paragraph-padding);padding-right:var(--paragraph-padding);text-align:justify}.main-container blockquote .text{--h-space:10px;--v-space:4px;background-color:#e7e7e7;border-radius:var(--border-radius);border-right:5px solid var(--primary-color-inactive);margin-left:calc(var(--paragraph-padding)*1.3);margin-right:calc(var(--paragraph-padding)*1.3);padding:var(--v-space) var(--h-space);transition:border-right var(--anim-duration)}.main-container blockquote .text:hover{border-right-color:var(--primary-color-active)}.resources .text{direction:ltr;font-size:.8rem;text-align:start}.main-container code{background-color:#f1f1f1;border-radius:var(--border-radius);direction:ltr!important;font-size:1.1rem;padding-left:6px;padding-right:6px;text-align:left;white-space:nowrap}.playground-button{background-color:var(--primary-color-active);border-bottom-left-radius:var(--border-radius);padding:0 5px;position:absolute;right:0;top:0}.playground-button a{color:#fff;font-size:.8rem;margin:0}.playground-button a:hover{text-decoration:none}code[class*=language-],pre[class*=language-]{color:#5c6e74;direction:ltr;font-family:Source Code Pro,Andale Mono,Ubuntu Mono,monospace;font-size:1rem;-webkit-hyphens:none;hyphens:none;line-height:1.5;tab-size:4;text-align:left;text-shadow:none;white-space:pre;word-break:normal;word-spacing:normal}code[class*=language-]::mozselection,code[class*=language-]::selection,pre[class*=language-]::mozselection,pre[class*=language-]::selection{background:#b3d4fc;text-shadow:none}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{background:var(--secondary-color);border:1px solid var(--primary-color-inactive);border-radius:var(--border-radius);margin:.5em 0;overflow:auto;padding:.8em;transition:border var(--anim-duration)}pre[class*=language-]:hover{border:1px solid var(--primary-color-active)}:not(pre)>code[class*=language-]{background:#f9f2f4;border-radius:.3em;color:#db4c69;padding:.1em .3em}.namespace{opacity:.7}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#93a1a1}.token.punctuation{color:#999}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{background:#fff;color:#a67f59}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}pre[data-line]{position:relative}pre[class*=language-]>code[class*=language-]{position:relative;z-index:1}.line-highlight{background:#f7ebc6;box-shadow:inset 5px 0 0 #f7d87c;left:0;line-height:inherit;margin-top:1em;padding-bottom:inherit;padding-left:0;padding-right:0;padding-top:inherit;pointer-events:none;position:absolute;right:0;white-space:pre;z-index:0}.footnotes,.post-list-container h1,.text,a,em,h2,h3,h4,h5,h6,li,p,ul{font-family:Vazir,monospace,Source Code Pro!important;line-height:1.6;margin:0;padding:0}.post-list-container ul{list-style-type:circle;padding:0}.post-list-container li a{color:#121212;text-decoration-style:dotted}.post-list-container li{margin-top:16px}.category-container .badge{background-color:var(--primary-color-active);border-radius:5px;color:#fff;margin-left:5px;padding-left:4px;padding-right:4px}.post-list-container{direction:rtl;display:flex;flex-direction:row;flex-wrap:wrap;padding:3rem}.category-container{margin:2rem 1rem;width:calc(50% - 2rem)}.category-container .hr{background-color:var(--primary-color-active);border-radius:5px;height:5px;margin-bottom:1rem;margin-top:.1rem;width:40%}@media screen and (max-width:425px){.category-container{width:100%}.post-list-container{padding:1rem}}.social{display:flex;flex-direction:row;font-family:Source Code Pro!important;font-size:.9rem;justify-content:center;margin-top:20px;width:100%}.social a{color:grey!important;opacity:.6;transition:.2s}.social a:hover{opacity:1}.social p{margin-left:10px;margin-right:10px}</style><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><title data-react-helmet="true">Ø¬Ø§Ø¯ÙˆÛŒ Context</title><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div class="main-container-wrapper"><div class="main-container"><div class="text">ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§Ø¯Ø± Ø¯Ø³Øª Ù†Ú¯Ø§Ø±Ø´ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§ğŸš§</div><h1>Ø¬Ø§Ø¯ÙˆÛŒ Context</h1><div class="text">Ø¨Ø¹Ø¶Ø§ ÙˆÙ‚ØªØ§ Ú©Ù‡ Ø¨Ø§ API
Ø¨Ø¹Ø¶ÛŒ Ø§Ø² ÙØ±ÛŒÙ…ÙˆØ±Ú©â€ŒÙ‡Ø§ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†ÛŒÙ…ØŒ ÛŒÚ©Ø³Ø±ÛŒ API
Ø¯Ø§Ø±Ù† Ú©Ù‡ Ø¨Ù‡ Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ø¨Ø§ Ø¬Ø§Ø¯Ùˆ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†. Ù…Ø«Ù„Ø§ Ú†ÛŒØ²ÛŒ Ù…Ø«Ù„
<code dir="ltr">useContext</code> Ø¯Ø§Ø®Ù„ Ø±ÛŒâ€ŒØ§Ú©Øª. Ú†Ø·ÙˆØ±ÛŒ Ø¨Ù‡Ù… Context
Ø¯Ø±Ø³Øª Ø±Ùˆ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÙˆÙ†Ù‡ØŸ ÛŒØ§ Ø¯Ø§Ø®Ù„ ÙØ±ÛŒÙ…â€ŒÙˆØ±Ú© Ù‡Ø§ÛŒ ÙˆØ¨â€ŒØ³Ø±ÙˆØ± Node
Ú†Ø·ÙˆØ±ÛŒ Ø¨Ø¹Ø¶ÛŒ Ø§Ø² ÙØ§Ù†Ú©Ø´Ù†â€ŒÙ‡Ø§ Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø§ <code dir="ltr">req</code> Ø±Ùˆ Ø¨Ù‡Ø´ÙˆÙ† Ø¨Ø¯ÛŒÙ…ØŒ
Ù…ÛŒÙÙ‡Ù…Ù† Ø¨Ø§ÛŒØ¯ Ø¨Ø§ Ú©Ø¯ÙˆÙ… <code dir="ltr">req</code> Ú©Ø§Ø± Ú©Ù†Ù†ØŸ</div><div class="text">Ø¨ÛŒØ§ÛŒÙ… Ø§Ø² Ø±ÛŒâ€ŒØ§Ú©Øª Ú©Ù‡ Ø³Ø§Ø¯Ù‡â€ŒØªØ±ÛŒÙ†Ø´ÙˆÙ† Ù‡Ø³Øª Ø´Ø±ÙˆØ¹ Ú©Ù†ÛŒÙ… Ùˆ Ù‡Ù…ÛŒÙ†Ø·ÙˆØ±ÛŒ Ø¨Ø±ÛŒÙ… Ù…Ø«Ø§Ù„ Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ± Ø±Ùˆ Ù†Ú¯Ø§Ù‡ Ú©Ù†ÛŒÙ… Ø¨Ø¨ÛŒÙ†ÛŒÙ… Ú†Ø·ÙˆØ±ÛŒ Ú©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù†. Ø¢Ø®Ø± Ù‡Ù… ÛŒÚ© Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ Ú©Ù†ÛŒÙ…
Ú©Ù‡ Ú©Ù„Ø§ Ø§ÛŒÙ† Ø³ÛŒØ³ØªÙ…â€ŒÙ‡Ø§ Ø§Ø² Ú†Ù‡ Ù…Ú©Ø§Ù†ÛŒØ²Ù…ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù†.</div><h2>useContext Ø¯Ø§Ø®Ù„ Ø±ÛŒâ€ŒØ§Ú©Øª</h2><div class="text">Ø§Ø­ØªÙ…Ø§Ù„Ø§ Ø§Ú¯Ù‡ Ø¨Ø§ Ø±ÛŒâ€ŒØ§Ú©Øª Ú©Ø§Ø± Ú©Ø±Ø¯Ù‡ Ø¨Ø§Ø´ÛŒØ¯ØŒ Ø¨Ø§ Context Ù‡Ù… Ø¢Ø´Ù†Ø§ Ù‡Ø³ØªÛŒØ¯. Ø§Ú¯Ø± Ù‡Ù… Ù†Ù‡ ÛŒÚ© ØªÙˆØ¶ÛŒØ­ Ø®ÛŒÙ„ÛŒ Ø³Ø§Ø¯Ø´ Ø§ÛŒÙ†Ù‡ØŒ ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ù‡Ù…Ú†ÛŒÙ†
Ú†ÛŒÙ†Ø´ÛŒ Ø¨Ø±Ø§ÛŒ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù‡Ø§ØªÙˆÙ† Ø¯Ø§Ø±ÛŒØ¯.</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">            </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text"></span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span></div></pre></div><div class="text">Ø­Ø§Ù„Ø§ ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ Ù…ÛŒØ®ÙˆØ§ÛŒØ¯ ÛŒÚ©Ø³Ø±ÛŒ Ø¯ÛŒØªØ§ Ø§Ø² Ø¨Ø§Ù„Ø§ Ø¨Ù‡ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª <code dir="ltr">Inner</code> Ø¨ÙØ±Ø³ØªÛŒØ¯ Ø¨Ø¯ÙˆÙ† Ú©Ù‡ Ù„Ø§Ø²Ù… Ø¨Ø§Ø´Ù‡ Ø§Ø² props Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯. Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ Ø¨Ø§ <code dir="ltr">Provider</code> Ø§ÙˆÙ†Ùˆ Ø³Øª Ú©Ù†ÛŒØ¯:</div><div style="position:relative"><pre class="prism-code language-diff"><div class="token-line"><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">&lt;MyContext.Provider value={{ user: &quot;username&quot; }}&gt;</span></div><div class="token-line"><span class="token inserted-sign inserted line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &lt;TopComponent&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">       &lt;MiddleComponent1&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">           &lt;MiddleComponent2&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">               &lt;Inner&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">           &lt;MiddleComponent2&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">       &lt;/MiddleComponent1&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token unchanged prefix unchanged"> </span><span class="token unchanged line">   &lt;/TopComponent&gt;</span></div><div class="token-line"><span class="token unchanged line"></span><span class="token inserted-sign inserted prefix inserted">+</span><span class="token inserted-sign inserted line">&lt;/MyContext.Provider&gt;</span></div></pre></div><div class="text">Ùˆ Ø¨Ø§ <code dir="ltr">useContext()</code> Ø§ÙˆÙ†Ùˆ Ù¾Ø§ÛŒÛŒÙ† ØªØ± Ø¯Ø±ÛŒØ§ÙØª Ú©Ù†ÛŒØ¯:</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token keyword">function</span><span class="token plain"> </span><span class="token function maybe-class-name">Inner</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> user </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">useContext</span><span class="token punctuation">(</span><span class="token maybe-class-name">MyContext</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation">.</span><span class="token method function property-access">log</span><span class="token punctuation">(</span><span class="token plain">user</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"> </span><span class="token comment">// username</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token comment">// ...</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><div class="text">Ø®Ø¨ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ù…Ú†ÛŒÙ† Ú†ÛŒØ²ÛŒ Ø³Ø§Ø¯Ù‡ Ø¨Ù†Ø¸Ø± Ù…ÛŒâ€ŒØ±Ø³Ù‡ØŒ Ù…ÛŒØªÙˆÙ†ÛŒÙ… Ù…Ù‚Ø¯Ø§Ø±Ø´Ùˆ ØªÙˆÛŒ ÛŒÚ© Ù…ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ØªÛŒÚ© Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒÙ… Ùˆ Ø¨Ø§ <code dir="ltr">useContext</code> Ø§ÙˆÙ†Ùˆ Ø¨Ø±Ø´ Ú¯Ø±Ø¯ÙˆÙ†ÛŒÙ….
ØªÙˆÛŒ Ù…Ø«Ø§Ù„ Ø¨Ø§Ù„Ø§ Ø§ÛŒÙ† Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ø¬ÙˆØ§Ø¨ Ù…ÛŒØ¯Ù‡ ÙˆÙ„ÛŒ Ø¨Ø§ Context Ø±ÛŒâ€ŒØ§Ú©Øª Ù…ÛŒØ´Ù‡ Ú©Ø§Ø±Ù‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ±ÛŒ Ú©Ø±Ø¯. Ù…Ø«Ù„Ø§ Ù…ÛŒØ´Ù‡ Ø§ÙˆÙ†Ùˆ ØªÙˆ Ø¯Ø± ØªÙˆ ØªØ¹Ø±ÛŒÙ Ú©Ø±Ø¯:</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username1&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">            </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username2&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">                </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">                    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">                </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">            </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text"></span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span></div></pre></div><div class="text">ÛŒØ§ Ø­ØªÛŒ ØªÙˆÛŒ Ø´Ø§Ø®Ù‡â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„Ù Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù‡Ø§Ù…ÙˆÙ† Ø§Ø²Ø´ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ø±Ø¯:</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username1&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username2&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text"></span><span class="token tag punctuation">&lt;/</span><span class="token tag punctuation">&gt;</span></div></pre></div><div class="text">Ú©Ù‡ Ø®Ø¨ Ø§ÛŒÙ† Ù‚Ø§Ø¨Ù„ÛŒØª Ø±Ùˆ Ù†Ù…ÛŒØ´Ù‡ Ø¨Ø§ ÛŒÚ© Ù…ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ØªÛŒÚ© Ø³Ø§Ø¯Ù‡ Ù¾ÛŒØ§Ø¯Ù‡ Ø³Ø§Ø²ÛŒ Ú©Ø±Ø¯. ÛŒØ§ Ø­Ø¯Ø§Ù‚Ù„ Ù†Ù‡ Ø¨Ù‡ Ø§ÛŒÙ† Ø³Ø§Ø¯Ú¯ÛŒâ€ŒÙ‡Ø§!
Ù…ÛŒâ€ŒØ¯ÙˆÙ†ÛŒÙ… Ú©Ù‡ ØªÙˆÛŒ Ù…Ø±ÙˆØ±Ú¯Ø± Ú©Ø¯ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾ØªÙ…ÙˆÙ† Ø³ÛŒÙ†Ú¯Ù„â€ŒØªØ±Ø¯ Ø§Ø¬Ø±Ø§ Ù…ÛŒâ€ŒØ´Ù‡. ÛŒØ¹Ù†ÛŒ Ù…ÙˆØ§Ø²ÛŒ Ø¯Ùˆ ØªÛŒÚ©Ù‡ Ø§Ø² Ú©Ø¯ Ø§Ø¬Ø±Ø§ Ù†Ù…ÛŒâ€ŒØ´Ù†.
Ø§Ú¯Ù‡ ØªÙˆÛŒ Ø²Ù…Ø§Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ø±Ø³ØªÛŒ Ø§ÛŒÙ† Ù…ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ØªÛŒÚ© ÛŒØ§ Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø±Ùˆ Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø±Ø³ØªØ´ Ù¾Ø± Ø¨Ú©Ù†ÛŒÙ…ØŒ Ú©Ø§ÙÛŒÙ‡ <code dir="ltr">useContext</code>
Ù‡Ù…ÙˆÙ† Ù…Ù‚Ø¯Ø§Ø± Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„Ù…ÙˆÙ† Ø±Ùˆ Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†Ù‡.</div><div class="text">Ø®Ø¨ Ù…Ø«Ø§Ù„ Ø§ÙˆÙ„Ù…ÙˆÙ† Ø±Ùˆ Ø¯Ø± Ù†Ø¸Ø± Ø¨Ú¯ÛŒØ±ÛŒØ¯:</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">            </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">                </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">            </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MiddleComponent2</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">        </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MiddleComponent1</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">TopComponent</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text"></span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span></div></pre></div><div class="text">Ø±Ù†Ø¯Ø±Ø± Ø±ÛŒâ€ŒØ§Ú©Øª Ù…ÛŒØ§Ø¯ Ø§ÛŒÙ† Ø¯Ø±Ø®Øª Ø±Ùˆ Ù¾ÛŒÙ…Ø§ÛŒØ´ Ù…ÛŒÚ©Ù†Ù‡ Ø§Ø² Ø¨Ø§Ù„Ø§ ØªØ§ Ù¾Ø§ÛŒÛŒÙ† Ø´Ø±ÙˆØ¹ Ù…ÛŒÚ©Ù†Ù‡:</div><ul><li>Ø¨Ù‡ <code>MyContext.Provider</code> Ù¾Ø³ Ù…Ù‚Ø¯Ø§Ø± <code>MyContext.currentValue = { user: &quot;username&quot; }</code> Ù…ÛŒØ´Ù‡</li><li>Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ø¨Ù‡ TopComponent Ùˆ vdom Ø±Ùˆ Ù…ÛŒâ€ŒØ³Ø§Ø²Ù‡.</li><li>Ø¨Ù‡ MiddleComponent1 Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ùˆ Ø§ÙˆÙ†Ùˆ Ù‡Ù… Ø±Ù†Ø¯Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡.</li><li>Ø¨Ù‡ MiddleComponent2 Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ùˆ Ø§ÙˆÙ†Ùˆ Ù‡Ù… Ø±Ù†Ø¯Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡.</li><li>Ø¯Ø± Ù†Ù‡Ø§ÛŒØª Ø¨Ù‡ <code>Inner</code> Ù…ÛŒâ€ŒØ±Ø³Ù‡ Ùˆ <code>useContext</code> Ù…Ù‚Ø¯Ø§Ø± <code>MyContext.currentValue</code> Ø±Ùˆ Ø¨Ø±Ù…ÛŒâ€ŒÚ¯Ø±Ø¯ÙˆÙ†Ù‡ Ú©Ù‡ Ù‡Ù…ÙˆÙ† <code>{ user: &quot;username&quot; }</code> Ù‡Ø³Øª.</li></ul><div class="text">Ø¨Ø±ÛŒÙ… Ø¨Ù‡ ÛŒÚ© Ù…Ø«Ø§Ù„ Ù¾ÛŒÚ†ÛŒØ¯Ù‡â€ŒØªØ± Ù‡Ù… Ù†Ú¯Ø§Ù‡ Ú©Ù†ÛŒÙ…:</div><div style="position:relative"><pre class="prism-code language-jsx"><div class="token-line"><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username1&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag"> </span><span class="token tag attr-name">value</span><span class="token tag script language-javascript script-punctuation punctuation">=</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript punctuation">{</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript literal-property property">user</span><span class="token tag script language-javascript operator">:</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript string">&quot;username2&quot;</span><span class="token tag script language-javascript"> </span><span class="token tag script language-javascript punctuation">}</span><span class="token tag script language-javascript punctuation">}</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">       </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text">    </span><span class="token tag punctuation">&lt;</span><span class="token tag class-name">Inner</span><span class="token tag punctuation">&gt;</span><span class="token plain-text"></span></div><div class="token-line"><span class="token plain-text"></span><span class="token tag punctuation">&lt;/</span><span class="token tag class-name">MyContext.Provider</span><span class="token tag punctuation">&gt;</span></div></pre></div><div class="text">ØªÙˆÛŒ Ø§ÛŒÙ† Ù…Ø«Ø§Ù„ Ú†ÛŒØŸ Ø§Ú¯Ù‡ Ù…Ø«Ù„ Ù‚Ø¨Ù„ Ø¹Ù…Ù„ Ú©Ù†ÛŒÙ… Ú©Ù‡ Ø¨Ù‡ <code dir="ltr">Inner</code> Ø¯ÙˆÙ…ÛŒ Ù…Ù‚Ø¯Ø§Ø± <code dir="ltr">username2</code> Ù…ÛŒâ€ŒØ±Ø³Ù‡.
Ø§ÛŒÙ†Ø¬Ø§Ø³Øª Ú©Ù‡ Ø¨Ø§ÛŒØ¯ Ø®ÙˆØ¯ ÙØ±ÛŒÙ…â€ŒÙˆØ±Ú© Ø¨Ù‡Ù…ÙˆÙ† ÛŒÚ© Ù‡ÙˆÚ© Ø¨Ø¯Ù‡ ØªØ§ Ø¨ØªÙˆÙ†ÛŒÙ… Ø²Ù…Ø§Ù† Ø®Ø±ÙˆØ¬ Ø±Ù†Ø¯Ø±Ø¯ ÛŒÚ© Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø±Ùˆ Ø¨ÙÙ‡Ù…ÛŒÙ….
ÛŒØ¹Ù†ÛŒ Ú†ÛŒØŸ ÙØ±Ø¶ Ú©Ù†ÛŒØ¯ ØªØ±ØªÛŒØ¨ Ø§Ø¬Ø±Ø§ Ø¹Ù…Ù„ÛŒØ§Øª Ø±Ù†Ø¯Ø±Ø± Ø¨ØµÙˆØ±Øª Ø²ÛŒØ± Ù‡Ø³Øª:</div><div style="position:relative"><pre class="prism-code language-undefined"><div class="token-line"><span class="token plain">enter(MyContext.Provider)</span></div><div class="token-line"><span class="token plain">render()</span></div><div class="token-line"><span class="token plain">  enter(MyContext.Provider)</span></div><div class="token-line"><span class="token plain">  render()</span></div><div class="token-line"><span class="token plain">    enter(Inner)</span></div><div class="token-line"><span class="token plain">    render()</span></div><div class="token-line"><span class="token plain">    exit(Inner)</span></div><div class="token-line"><span class="token plain">  exit(MyContext.Provider)</span></div><div class="token-line"><span class="token plain">exit(MyContext.Provider)</span></div></pre></div><div class="text">Ø­Ø§Ù„Ø§ Ù…Ø§ ØªÙˆÛŒ Ø§ÙˆÙ† Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø§Ú¯Ù‡ Ø¨ÛŒØ§ÛŒÙ… ÛŒÚ© Ø¯Ø±Ø®Øª Ø¯Ø±Ø³Øª Ú©Ù†ÛŒÙ… Ú©Ù‡ Ù…ÙˆÙ‚Ø¹ <code dir="ltr">enter</code> Ø¨Ø±Ø§ÛŒ Ù‡Ø± <code dir="ltr">Context</code>
Ø§ÙˆÙ†Ùˆ Ø¨Ù‡ Ø¯Ø±Ø®Øª Ø§Ø¶Ø§ÙÙ‡ Ú©Ù†Ù‡ Ùˆ Ù…ÙˆÙ‚Ø¹ <code dir="ltr">exit</code> Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±Ú¯ Ø¯Ø±Ø®Øª Ø±Ùˆ Ø­Ø°Ù Ú©Ù†Ù‡ØŒ
Ø§Ú¯Ù‡ Ø¯Ø§Ø®Ù„ <code dir="ltr">useContext</code> Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±Ú¯ Ø§ÛŒÙ† Ø¯Ø±Ø®Øª Ø±Ùˆ Ø¨Ø®ÙˆÙ†ÛŒÙ…ØŒ Ù‡Ù…ÛŒØ´Ù‡ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø±Ø³ØªÛŒ Ø±Ùˆ Ø®ÙˆØ§Ù‡ÛŒÙ… Ø¯Ø§Ø´Øª!</div><h2>AsyncLocalStorage Ø¯Ø§Ø®Ù„ Nodejs</h2><div style="position:relative"><pre class="prism-code language-javascript"><div class="token-line"><span class="token keyword">const</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"> </span><span class="token maybe-class-name">AsyncLocalStorage</span><span class="token plain"> </span><span class="token punctuation">}</span><span class="token plain"> </span><span class="token operator">=</span><span class="token plain"> </span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;async_hooks&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">const</span><span class="token plain"> myAsyncLocalStorage </span><span class="token operator">=</span><span class="token plain"> </span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">AsyncLocalStorage</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">middleware</span><span class="token punctuation">(</span><span class="token parameter">req</span><span class="token parameter punctuation">,</span><span class="token parameter"> res</span><span class="token parameter punctuation">,</span><span class="token parameter"> next</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  myAsyncLocalStorage</span><span class="token punctuation">.</span><span class="token method function property-access">run</span><span class="token punctuation">(</span><span class="token keyword">new</span><span class="token plain"> </span><span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token arrow operator">=&gt;</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    myAsyncLocalStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token method function property-access">set</span><span class="token punctuation">(</span><span class="token string">&#x27;userId&#x27;</span><span class="token punctuation">,</span><span class="token plain"> req</span><span class="token punctuation">.</span><span class="token property-access">headers</span><span class="token punctuation">[</span><span class="token string">&#x27;x-user-id&#x27;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">async</span><span class="token plain"> </span><span class="token keyword">function</span><span class="token plain"> </span><span class="token function">requestHandler</span><span class="token punctuation">(</span><span class="token parameter">req</span><span class="token parameter punctuation">,</span><span class="token parameter"> res</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> store </span><span class="token operator">=</span><span class="token plain"> myAsyncLocalStorage</span><span class="token punctuation">.</span><span class="token method function property-access">getStore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  </span><span class="token keyword">const</span><span class="token plain"> userId </span><span class="token operator">=</span><span class="token plain"> store</span><span class="token punctuation">.</span><span class="token method function property-access">get</span><span class="token punctuation">(</span><span class="token string">&#x27;userId&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">  res</span><span class="token punctuation">.</span><span class="token method function property-access">send</span><span class="token punctuation">(</span><span class="token template-string template-punctuation string">`</span><span class="token template-string string">Hello user </span><span class="token template-string interpolation interpolation-punctuation punctuation">${</span><span class="token template-string interpolation">userId</span><span class="token template-string interpolation interpolation-punctuation punctuation">}</span><span class="token template-string template-punctuation string">`</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><div class="text">Ø®Ø¨ ØªÙˆÛŒ Ø±ÛŒâ€ŒØ§Ú©Øª Ø±Ù†Ø¯Ø±ÛŒÙ†Ú¯ Ø±Ùˆ Ù…ÛŒâ€ŒØ¯ÙˆÙ†ÛŒÙ… Ú©Ù‡ Ø¯Ø± ÛŒÚ© Ù„Ø­Ø¸Ù‡ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ ÛŒÚ© Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§Ø³ØªØŒ Ù¾Ø³ Ù…ÛŒâ€ŒØ´Ù‡ ØªÙˆÛŒ
Ø²Ù…Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ø§ÙˆÙ† Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø±Ùˆ Ø¨Ø§ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø±Ø³ØªØ´ Ù¾Ø± Ú©Ø±Ø¯. ÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ ÛŒÚ© ÙˆØ¨â€ŒØ³Ø±ÙˆØ± ØªÙˆÛŒ Node
Ú©Ù‡ Ù‡Ù…Ø²Ù…Ø§Ù† Ù…Ù…Ú©Ù†Ù‡ Ú†Ù†Ø¯ÛŒÙ† Ø±ÛŒâ€ŒÚ©ÙˆØ¦Ø³Øª Ø¨ØµÙˆØ±Øª async
Ø¯Ø± Ø­Ø§Ù„ Ø§Ø¬Ø±Ø§ Ø¨Ø§Ø´Ù†ØŒ Ø±Ùˆ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ú†ÛŒÚ©Ø§Ø± Ú©Ù†ÛŒÙ….
ØªÙˆÛŒ Ú©Ø¯ Ø¨Ø§Ù„Ø§ Ù…Ø§ Ø§ÙˆÙ…Ø¯ÛŒÙ… Ø¨Ø±Ø§ÛŒ express Ú©Ù‡ ÛŒÚ© ÙˆØ¨â€ŒØ³Ø±ÙˆØ± Ù‡Ø³ØªØŒ ÛŒÚ© Ù¾Ù„Ø§Ú¯ÛŒÙ† Ù†ÙˆØ´ØªÛŒÙ… Ú©Ù‡ Ù…ÛŒØ§Ø¯ ÛŒÚ© Ù‡Ø¯Ø± Ø±Ùˆ Ø§Ø² ØªÙˆÛŒ Ø±ÛŒÚ©Ùˆâ€Œâ€ŒØ¦Ø³Øª Ù…ÛŒâ€ŒØ®ÙˆÙ†Ù‡ Ùˆ ÛŒÚ©Ø¬Ø§ Ø¯Ø®ÛŒØ±Ù‡ Ù…ÛŒÚ©Ù†Ù‡.
Ùˆ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± ØªÙˆÛŒ Ù‡Ù†Ø¯Ù„Ø±Ù…ÙˆÙ† Ø¨Ø¯ÙˆÙ† Ø§ÛŒÙ†Ú©Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§ÙˆÙ† Ø¨Ù‡ Ø±ÛŒâ€ŒÚ©ÙˆØ¦Ø³Øª Ø¯Ø§Ø¯Ù‡ Ø¨Ø§Ø´ÛŒÙ… Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ø¨Ø®ÙˆÙ†ÛŒÙ….
Ø§ÛŒÙ† <code dir="ltr">AsyncLocalStorage</code> Ú†Ø·ÙˆØ±ÛŒ Ù…ÛŒâ€ŒØªÙˆÙ†Ù‡ Ø¨ÙÙ‡Ù…Ù‡ Ø¨Ø§ÛŒØ¯ Ù…Ù‚Ø¯Ø§Ø± Ø¯Ø±Ø³Øª Ø±Ùˆ Ø¨Ø±Ú¯Ø±Ø¯ÙˆÙ†Ù‡ØŸ</div><div class="text">Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ù… Ø¬Ø§ÙˆØ§ Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³ÛŒÙ†Ú¯Ù„â€ŒØªØ±Ø¯ Ù‡Ø³Øª ÙˆÙ„ÛŒ Ù…Ø­ÛŒØ·Ù…ÙˆÙ† Ø¯Ø§Ø®Ù„Ø´ Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡ØŒ Ù¾Ø³ Ø§Ú¯Ù‡ Ø¨Ø®ÙˆØ§ÛŒÙ… Ø§Ø² ÛŒÚ©
Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒÙ… Ù…Ù…Ú©Ù†Ù‡ Ù‡Ù…Ø²Ù…Ø§Ù† Ù¾ÛŒØ´ Ø¨ÛŒØ§Ø¯.
Ù‡Ù…Ú†Ù†ÛŒÙ† Ù…Ø«Ù„ Ø±ÛŒâ€ŒØ§Ú©Øª Ù…Ø§ Ú†ÛŒØ²ÛŒ Ù…Ø«Ù„ Ú©Ø§Ù…Ù¾ÙˆÙ†Ù†Øª Ù†Ø¯Ø§Ø±ÛŒÙ… Ú©Ù‡ Ø¨Ø¯ÙˆÙ†ÛŒÙ… Ú©ÛŒ
enter Ø´Ø¯ Ùˆ exit Ø´Ø¯ ØªØ§ Ø¯Ø± Ø²Ù…Ø§Ù† Ù…Ù†Ø§Ø³Ø¨ Ù…Ù‚Ø¯Ø§Ø± Ù…Ù†Ø§Ø³Ø¨ÛŒ ØªÙˆÛŒ Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒÙ….</div><div class="text">ÛŒØ§Ø¯Ù…ÙˆÙ† Ø¨Ø§Ø´Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø±Ù‡ ÙˆÙ„ÛŒ Ø§ÛŒÙ† Ù‡Ù…Ø²Ù…Ø§Ù†ÛŒ ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ú©Ø§Ø±Ù‡Ø§ÛŒ IO Ø§Ø³Øª.
ÛŒØ¹Ù†ÛŒ Ø§Ú¯Ù‡ ÛŒÚ© Ú©Ø§Ø± sync Ø¯Ø§Ø±ÛŒÙ… Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ¯ÛŒÙ…ØŒ Ù‡ÛŒÚ† Ú©Ø§Ø± sync Ø¯ÛŒÚ¯Ù‡â€ŒØ§ÛŒ Ø§Ù†Ø¬Ø§Ù… Ù†Ù…ÛŒØ´Ù‡.</div><div class="text">Ù‡Ù…ÛŒÙ†Ø·ÙˆØ± Ù‡Ø± Ø±ÛŒÚ©Ùˆâ€Œâ€ŒÙŠØ³Øª ÛŒÚ© task Ø¨Ù‡ ØµÙˆØ±Øª async ÛŒØ§ ÛŒÚ© Promise Ø¯Ø±Ø³Øª Ù…ÛŒâ€ŒÚ©Ù†Ù‡.</div><div class="text">Ø®Ø¨ Ø­Ø§Ù„Ø§ Ø§Ú¯Ù‡ Ø¨Ù‡ ÛŒÚ© Ø·Ø±ÛŒÙ‚ÛŒ Ø¨ÙÙ‡Ù…ÛŒÙ… Ø¯Ø± ÛŒÚ© Ù„Ø­Ø¸Ù‡ CPU Ø¯Ø³Øª Ú©Ø¯ÙˆÙ…
Promise Ù‡Ø³ØªØŒ Ù…ÛŒØªÙˆÙ†ÛŒÙ… Ø§ÛŒÙ†Ùˆ Ù¾ÛŒØ§Ø¯Ù‡ Ø³Ø§Ø²ÛŒ Ú©Ù†ÛŒÙ….</div><div class="text">Ø§Ù†Ø¬ÛŒÙ†â€ŒÙ‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø¨Ø±Ø§ÛŒ Ø¬Ø§ÙˆØ§Ø§Ø³Ú©Ø±ÛŒÙ¾Øª Ù‡Ø³Øª Ú©Ù‡ ÛŒÚ©ÛŒØ´ v8 Ù‡Ø³Øª.
Ø§ÛŒÙ† Ø§Ù†Ø¬ÛŒÙ† Ø¨Ù‡ Ù…Ø§ ÛŒÙ‡ Ú†ÛŒØ²ÛŒ Ø¨Ù‡ Ù†Ø§Ù… PromiseHooks Ø¨Ù‡Ù…ÙˆÙ† Ù…ÛŒØ¯Ù‡ØŒ Ø®ÛŒÙ„ÛŒ Ø®Ù„Ø§ØµÙ‡ Ùˆ Ø³Ø§Ø¯Ù‡
Ù‡Ø± ÙˆÙ‚Øª ÛŒÚ© Promise Ø´Ø±ÙˆØ¹ Ù…ÛŒÚ©Ù†Ù‡ Ø¨Ù‡ ÛŒÚ© Ú©Ø§Ø± IO
Ùˆ Ø§ÛŒÙˆÙ†Øªâ€ŒÙ„ÙˆÙ¾ Ù…ÛŒØ§Ø¯ ØªØ§ ÙˆÙ‚ØªÛŒ Ú©Ø§Ø± IO ØªÙ…ÙˆÙ… Ù…ÛŒØ´Ù‡ ÛŒÚ© Promise
Ø¯ÛŒÚ¯Ù‡â€ŒØ±Ùˆ Ø¬Ù„Ùˆ Ù…ÛŒâ€ŒØ¨Ø±Ù‡ØŒ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ù‡ÙˆÚ©â€ŒÙ…ÙˆÙ† Ø±Ùˆ ØµØ¯Ø§ Ø¨Ø²Ù†ÛŒÙ….
Ù¾Ø³ Ø¹Ù…Ù„Ø§ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒÙ… Ø¨ÙÙ‡Ù…ÛŒÙ… Ú©Ù‡ ÛŒÚ© promise Ø¯Ø§Ø±Ù‡
enter Ù…ÛŒâ€ŒØ´Ù‡ Ùˆ Ú©ÛŒ Ø§ÙˆÙ† Ø¯Ø§Ø±Ù‡
exit Ù…ÛŒâ€ŒØ´Ù‡.</div><div class="text">Ø§ÛŒÙ† Ø¯Ø±Ø®Øª Ø¹Ù…Ù„Ø§ Ú†ÛŒØ²ÛŒ Ù…Ø«Ù„ call stack Ù‡Ø³Øª
ÙˆÙ„ÛŒ Ø¨Ø±Ø§ÛŒ promise task Ù‡Ø§.
Ú©Ù‡ Ø§Ú¯Ù‡ ÛŒÚ© ØªØ³Ú© Ø¯Ø§Ø®Ù„ ÛŒÚ© ØªØ³Ú© Ø§Ø¬Ø±Ø§ Ø¨Ø´Ù‡ Ø§ÛŒÙ†Ø¬Ø§ Ø¯Ø±Ø®ØªØ´Ùˆ Ø¯Ø§Ø±ÛŒÙ….</div><div class="text">Ø­Ø§Ù„Ø§ ØªÙˆÛŒ <code dir="ltr">run</code> Ú©Ø§ÙÛŒÙ‡ ØªÙˆÛŒ
promise ÙØ¹Ù„ÛŒ Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ú©Ù‡ Ù…ÛŒØ®ÙˆØ§ÛŒÙ… Ø±Ùˆ Ø°Ø®ÛŒØ±Ù‡ Ú©Ù†ÛŒÙ…
Ùˆ Ù‡Ø± ÙˆÙ‚Øª Ø®ÙˆØ§Ø³ØªÛŒÙ… Ù…Ù‚Ø¯Ø§Ø± Ø±Ùˆ Ù¾Ø§ÛŒÛŒÙ†â€ŒØªØ± Ø¨Ø®ÙˆÙ†ÛŒÙ… Ú©Ø§ÙÛŒÙ‡ Ø¯Ø±Ø®Øª Ø±Ùˆ Ù¾ÛŒÙ…Ø§ÛŒØ´ Ú©Ù†ÛŒÙ… Ùˆ Ø¨Ø±ÛŒÙ… ØªØ§ ÙˆÙ‚ØªÛŒ Ú©Ù‡ Ø¨Ù‡ Ù…Ù‚Ø¯Ø§Ø±ÛŒ Ú©Ù‡ Ù…ÛŒâ€ŒØ®ÙˆØ§ÛŒÙ… Ø¨Ø±Ø³ÛŒÙ…:</div><div class="text"><a href="https://github.com/supabase/edge-runtime/blob/main/crates/node/polyfills/internal/async_hooks.ts" dir="ltr">Ø§ÛŒÙ†Ø¬Ø§</a> Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ ÛŒÚ© Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² AsyncLocalStorage Ø±Ùˆ Ø¨Ø¨ÛŒÙ†ÛŒØ¯.</div><h2>Thread-local storage Ø¯Ø§Ø®Ù„ Ø³ÛŒØ³ØªÙ… Ø¹Ø§Ù…Ù„</h2><div class="text">ØªÙˆÛŒ AsyncLocalStorage ÙÙ‡Ù…ÛŒØ¯ÛŒÙ… Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒØ´ Ø§Ø² Ø§ÛŒÙ† ÙØ±Ø¶ Ú©Ù‡
Ø¬Ø§ÙˆØ§â€ŒØ§Ø³Ú©Ø±ÛŒÙ¾Øª Ø³ÛŒÙ†Ú¯Ù„â€ŒØªØ±Ø¯ Ù‡Ø³Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…ÛŒâ€ŒÚ©Ù†Ù‡ Ú©Ù‡ Ø§ÙˆÙ† Ù…ØªØºÛŒÛŒØ± Ø§Ø³ØªØ§ØªÛŒÚ© Ø±Ùˆ Ø¢Ù¾Ø¯ÛŒØª Ù†Ú¯Ù‡â€ŒØ¯Ø§Ø±Ù‡. Ø­Ø§Ù„Ø§ Ø§Ú¯Ù‡ Ø¨Ø±Ù†Ø§Ù…â€ŒÙ…ÙˆÙ† ØªÙˆÛŒ ÛŒÚ© Ø²Ø¨Ø§Ù†ÛŒ Ø¨Ø§Ø´Ù‡
Ú©Ù‡ Ø¨Ø´Ù‡ Ù…ÙˆÙ„ØªÛŒâ€ŒØªØ±Ø¯ Ú©Ø§Ø± Ú©Ø±Ø¯ Ú†ÛŒ. Ø§ÛŒÙ†Ùˆ Ø¨Ø§ÛŒØ¯ Ú†ÛŒÚ©Ø§Ø± Ú©Ù†ÛŒÙ…ØŸ!</div><div class="text">Ø¨Ù‡ Ú©Ø¯ C Ø²ÛŒØ± Ù†Ú¯Ø§Ù‡ Ú©Ù†ÛŒØ¯:</div><div style="position:relative"><pre class="prism-code language-c"><div class="token-line"><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword">include</span><span class="token macro property"> </span><span class="token macro property string">&lt;stdio.h&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token macro property directive-hash">#</span><span class="token macro property directive keyword">include</span><span class="token macro property"> </span><span class="token macro property string">&lt;pthread.h&gt;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">__thread </span><span class="token keyword">int</span><span class="token plain"> counter</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">void</span><span class="token operator">*</span><span class="token plain"> </span><span class="token function">thread_function</span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token plain"> arg</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    counter </span><span class="token operator">=</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">size_t</span><span class="token punctuation">)</span><span class="token plain">arg</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;Thread %d: counter = %d\n&quot;</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token class-name">size_t</span><span class="token punctuation">)</span><span class="token plain">arg</span><span class="token punctuation">,</span><span class="token plain"> counter</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token constant">NULL</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain"></span><span class="token keyword">int</span><span class="token plain"> </span><span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token plain"> </span><span class="token punctuation">{</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token class-name">pthread_t</span><span class="token plain"> threads</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token plain">threads</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">NULL</span><span class="token punctuation">,</span><span class="token plain"> thread_function</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">pthread_create</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token plain">threads</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">NULL</span><span class="token punctuation">,</span><span class="token plain"> thread_function</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token punctuation">(</span><span class="token keyword">void</span><span class="token operator">*</span><span class="token punctuation">)</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token function">pthread_join</span><span class="token punctuation">(</span><span class="token plain">threads</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">    </span><span class="token function">pthread_join</span><span class="token punctuation">(</span><span class="token plain">threads</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token plain"> </span><span class="token constant">NULL</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain">
</span></div><div class="token-line"><span class="token plain">    </span><span class="token keyword">return</span><span class="token plain"> </span><span class="token number">0</span><span class="token punctuation">;</span><span class="token plain"></span></div><div class="token-line"><span class="token plain"></span><span class="token punctuation">}</span></div></pre></div><div class="text">ØªÙˆÛŒ Ù…Ø«Ø§Ù„ Ø¨Ø§Ù„Ø§ Ø¨Ø§ Ø§ÛŒÙ†Ú©Ù‡ Ø¯ÙˆØªØ§ ØªØ±Ø¯ Ø¯Ø§Ø±Ù† ÛŒÚ© Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø±Ùˆ Ù…ÛŒâ€ŒØ®ÙˆÙ†Ù† ÙˆÙ„ÛŒ Ù…Ø´Ú©Ù„ data-race Ø¨ÙˆØ¬ÙˆØ¯ Ù†Ù…ÛŒØ§Ø¯.
Ú†Ø±Ø§ØŸ Ú†ÙˆÙ† Ø§ÛŒÙ† Ù…ØªØºÛŒÛŒØ± Ú¯Ù„ÙˆØ¨Ø§Ù„ Ø¨Ù‡ ØµÙˆØ±Øª Thread-local storage ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡.
Ú©Ù‡ Ø®Ø¨ ØªÙˆÛŒ Ø²Ø¨Ø§Ù† c Ù…ÛŒØ´Ù‡ ÛŒÚ© Ø§Ø³ØªØ§ØªÛŒÚ© Ø¨Ø§ Ù¾ÛŒâ€ŒØ´ÙˆÙ†Ø¯ <code dir="ltr">__thread</code> ØªØ¨Ø¯ÛŒÙ„ Ø¨Ù‡ <code dir="ltr">TLS</code> Ú©Ø±Ø¯.</div><div class="text">Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Ù‡Ø§ÛŒ Ù…Ø®ØªÙ„ÙÛŒ Ø§Ø² TLS Ù‡Ø³Øª Ú©Ù‡ ÛŒÚ©ÛŒØ´ Ù…Ø§Ù„ pthread Ø¦Ù‡.
Ú†ÛŒÚ©Ø§Ø± Ù…ÛŒâ€ŒÚ©Ù†Ù‡ØŸ</div><div class="text">TODO:</div><div class="text">ØªÙˆØ¶ÛŒØ­Ø§Øª Ú©Ø§Ù…Ù„â€ŒØªØ±Ø´Ùˆ Ù…ÛŒâ€ŒØªÙˆÙ†ÛŒØ¯ ØªÙˆÛŒ <a href="https://www.akkadia.org/drepper/tls.pdf" dir="ltr">Ø§ÛŒÙ†</a> Ù…Ù‚Ø§Ù„Ù‡ Ø¨Ø®ÙˆÙ†ÛŒØ¯.</div><h2>Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ</h2><div class="text">TODO:</div><hr/><h3>Ù…Ù†Ø§Ø¨Ø¹</h3><div dir="ltr" class="resources"><div class="text">[<!-- -->1<!-- -->]<!-- -->: </div></div></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/context-magic/";window.___webpackCompilationHash="c103745651a3b464ca50";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-1888b6368c0a709c8f93.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-d479770c8c96c1ac42f2.js"],"component---src-pages-context-magic-mdx":["/component---src-pages-context-magic-mdx-4b4e4dbf7124a0b0fb00.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-22c3dbbf0e0536d40b7e.js"],"component---src-pages-ratelimit-p-1-mdx":["/component---src-pages-ratelimit-p-1-mdx-ab74d2fc9b92877c5926.js"],"component---src-pages-ratelimit-p-2-mdx":["/component---src-pages-ratelimit-p-2-mdx-a831dc263d1b65146292.js"],"component---src-pages-usb-switcher-mdx":["/component---src-pages-usb-switcher-mdx-d2d9ce5fc9b3b3003e58.js"],"component---src-pages-v-8-ignition-mdx":["/component---src-pages-v-8-ignition-mdx-122560c660255bdbbf38.js"],"component---src-pages-v-8-jit-mdx":["/component---src-pages-v-8-jit-mdx-342275cde6b3adfce9f5.js"],"component---src-pages-v-8-mdx":["/component---src-pages-v-8-mdx-b1b5eabfe647d44e9a52.js"],"component---src-pages-v-8-parser-mdx":["/component---src-pages-v-8-parser-mdx-26d55d7ee79517093435.js"]};/*]]>*/</script><script src="/app-1888b6368c0a709c8f93.js" async=""></script><script src="/framework-2b6860fea1dc24d063ff.js" async=""></script><script src="/webpack-runtime-c251087d9a336ac50ffb.js" async=""></script></body></html>