import Mutex from "./mutex"

# چالش های پیاده سازی ratelimiter برای یک CDN - قسمت ۲

> این مطلب ادامه
[قسمت ۱](/ratelimit-p1) سری
«چالش های پیاده سازی ratelimiter برای CDN» 
هست و فرض می‌کنه که شما
قبلا اون رو مطالعه کردید.

همه وب‌سرور ها این قابلیت رو دارن که تعداد زیادی از درخواست هارو همزمان با هم قبول کنن. با
thread, async 
یا حتی با استفاده از
sub-process. اگر یک نفر چند درخواست همزمان ارسال کنه، سرور چطوری
ratelimit
اونو حساب می‌کنه؟ توی این قسمت به این موضوع نگاه می‌کنیم.


## اشتراک منابع

تقریبا هر موقع که 
concurrency داریم
، باید به این فکر کنیم که
منابع همزمان چطور میتونن دست چند چیز (مثل thread)
باشن. توی مسئله ما، چونکه ممکنه وب سرورمون درخواست های مختلف یک نفر رو با ترد های مختلفی هندل کنه،
و ما باید شمارنده های الگوریتممون بین این ترد ها مشترک باشن، ما هم این مسئله رو داریم و باید یک راه حل براش
در نظر بگیریم.

<Mutex />


- چرا وب سرور بدون همزمانی معنی نمیده. توضیح در مورد 
async و thread و حتی ck1000 چالش.
- مطرح کردن یک وب سرور مولتی ترد.
- اشتراک گذاری داده با استفاده mutex
    - بنچ‌مارک
  - تعمیم و استفاده از futex
    - بنچ‌مارک
- استفاده از atomic بجای لاک
- معماری nginx و چالش های چند پراسسی
- توضیح دقیق در مورد اینکه دسترسی مموری توی چند پراسسی چطور هست.
- اشتراک مموری با استفاده از shared memory
  - آیا استفاده از اتمیک بین پراسس ها سیف هست؟

قسمت بعدی
- روش های دیگه اشتراک مموری در چند پراسس