# جادوی Context

بعضا وقتا که با API
بعضی از فریمورک‌ها کار می‌کنیم، یکسری API
دارن که به نظر می‌رسه با جادو کار می‌کنن. مثلا چیزی مثل
`useContext` داخل ری‌اکت. چطوری بهم Context
درست رو برمی‌گردونه؟ یا داخل فریم‌ورک های وب‌سرور Node
چطوری بعضی از فانکشن‌ها بدون اینکه ما `req` رو بهشون بدیم،
میفهمن باید با کدوم `req` کار کنن؟

بیایم از ری‌اکت که ساده‌ترینشون هست شروع کنیم و همینطوری بریم مثال های پیچیده‌تر رو نگاه کنیم ببینیم چطوری کار می‌کنن. آخر هم یک نتیجه‌گیری کنیم
که کلا این سیستم‌ها از چه مکانیزمی استفاده می‌کنن.

## useContext داخل ری‌اکت



## AsyncLocalStorage داخل Nodejs
خب توی ری‌اکت رندرینگ رو می‌دونیم که در یک لحظه فقط برای یک کامپوننت در حال اجراست، پس می‌شه توی
زمان مناسب اون متغییر استاتیک رو با مقدار درستش پر کرد. ولی برای یک وب‌سرور توی Node
که همزمان ممکنه چندین ری‌کوئست بصورت async
در حال اجرا باشن، رو می‌تونیم چیکار کنیم.



## Thread-local storage داخل سیستم عامل
توی AsyncLocalStorage فهمیدیم پیاده‌سازیش از این فرض که
جاوا‌اسکریپت سینگل‌ترد هست استفاده می‌کنه که اون متغییر استاتیک رو آپدیت نگه‌داره. حالا اگه برنام‌مون توی یک زبانی باشه
که بشه مولتی‌ترد کار کرد چی. اینو باید چیکار کنیم؟!



## نتیجه‌گیری